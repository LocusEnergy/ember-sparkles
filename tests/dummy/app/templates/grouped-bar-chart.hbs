{{#ember-sparkles
  data=barData
  inputKey='ts'
  outputKey='W'
  groupKey='name'
  valueKey='value'

  x-scale=(band-scale
    (map (r/get 'ts') barData)
    round=true
    padding=0.2
  )
  y-scale=(linear-scale (append 0 outputMax))

  color-scale-type='20c'
  domain=groupDomain
  groupPadding=0.05
  transition-duration=transitionDuration
as |chart|}}

  {{chart.x-axis
    tick-format='%Y-%m-%d'
    label='Date (Y-M-D)'
    dy=(add chart.height 30)
    dx=-100
  }}

  {{chart.y-axis
    label='Watts'
    ticks=5
    yGrid=true
    dx=(mult -0.5 chart.height)
    dy=-30
  }}

  {{chart.grouped-bar-chart}}

  {{chart.legend
    dx=(sub chart.width 5)
    dy=20
    shape='rect'
    shape-spacing=17
    shape-size=15
  }}

{{/ember-sparkles}}


<button {{action (throttle (action "toggleData") (add transitionDuration 20))}}>Toggle Data</button>
