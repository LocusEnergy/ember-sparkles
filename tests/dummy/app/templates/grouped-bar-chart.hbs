{{#with (area 960 500 top=10 right=25 bottom=20 left=40) as |plotArea|}}

  {{#ember-sparkles
    area=plotArea
    data=barData

    inputKey='ts'
    outputKey='Wh_sum'
    groupKey='name'
    valueKey='value'

    x-scale=(band-scale
      (map (r/get 'ts') barData)
      (append 0 plotArea.width)
      round=true
      padding=0.2
    )

    y-scale=(linear-scale
      (append 0 outputMax)
      (append plotArea.height 0)
    )

    groupDomain=groupDomain
    groupPadding=0.05
    padding=0.2
    transition-duration=300
    as |chart|}}

    {{chart.x-axis
      position='bottom'
      tickFormat='%Y-%m-%d'
    }}

    {{chart.y-axis
      position='left'
      vertical-label='Wh_sum'
      ticks=5
      yGrid=true
    }}

    {{chart.grouped-bar-chart}}

  {{/ember-sparkles}}

{{/with}}

<button {{action (throttle (action "toggleData") 320)}}>Toggle Data</button>
