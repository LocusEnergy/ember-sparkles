<g transform="translate({{area.margin.left}},{{area.margin.top}})">

  {{#with (ember-sparkles/transition duration=(or transition-duration 700) data=data) as |transition|}}

    {{yield (hash
      x-axis=(component 'ember-sparkles/axis'
        scale=x-scale
        position='bottom'
        height=area.height
        transition=transition
        labelAttrs=(pipe
          (d3-attr 'x' area.width)
          (d3-attr 'y' (add area.height 15))
        )
      )

      y-axis=(component 'ember-sparkles/axis'
        scale=y-scale
        position='left'
        width=area.width
        transition=transition
        labelAttrs=(pipe (d3-attr 'transform' 'rotate(-90)'))
      )

      bar-chart=(component 'ember-sparkles/bar-chart'
        width=area.width
        height=area.height
        tickFormat=(or tick-format '%Y-%m-%d')
      )

      grouped-bar-chart=(component 'ember-sparkles/grouped-bar-chart'
        width=area.width
        height=area.height

        inputKey=(r/get inputKey)
        valueKey=(r/get valueKey)
        outputKey=(r/get outputKey)
        groupKey=(r/get groupKey)

        xScale=x-scale
        yScale=y-scale
        groupScale=(band-scale
          groupDomain
          (append 0 (compute x-scale.bandwidth))
          padding=groupPadding
        )

        groupDomain=groupDomain
        data=data

        colorScale=(cat-color-scale '20c' groupDomain)
        tickFormat=(or tick-format '%Y-%m-%d')
        transition=transition
      )

      line-chart=(component 'ember-sparkles/line-chart'
        width=area.width height=area.height
      )

      pie-chart=(component 'ember-sparkles/pie-chart'
        width=area.width
        height=area.height
        colorScale=(cat-color-scale '20' domain)
        radius=(div (d3-array 'min' (array area.width area.height)) 2)
        transition=transition
      )

      width=area.width
      height=area.height
    )}}

  {{/with}}
</g>
